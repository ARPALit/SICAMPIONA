@*
  Nome del progetto: SICampiona
  Copyright (C) 2025 Agenzia regionale per la protezione dell'ambiente ligure

  Questo programma è software libero: puoi ridistribuirlo e/o modificarlo
  secondo i termini della GNU Affero General Public License pubblicata dalla
  Free Software Foundation, sia la versione 3 della licenza, sia (a tua scelta)
  qualsiasi versione successiva.

  Questo programma è distribuito nella speranza che possa essere utile,
  ma SENZA ALCUNA GARANZIA; senza nemmeno la garanzia implicita di
  COMMERCIABILITÀ o IDONEITÀ PER UNO SCOPO PARTICOLARE. Vedi la
  GNU Affero General Public License per ulteriori dettagli.

  Dovresti aver ricevuto una copia della GNU Affero General Public License
  insieme a questo programma. In caso contrario, vedi <https://www.gnu.org/licenses/>.
*@

@page "/duplicacampionamentocompletato/{idCampionamento:int}/{codiceMatrice}"
@using SICampiona.Shared

@inject ICampionamentiStorage campionamentiStorage
@inject NavigationManager Navigation
@inject IDialogService DialogService
@inject IAnagrafiche anagrafiche

<FluentLabel Typo="Typography.PageTitle" Class="pagetitle">Duplica campionamento completato</FluentLabel>

<AvvisoErrore MessaggioErrore="@messaggioErrore"
			  DettagliErrore="@dettagliErrore"
			  VisualizzaComandoRicarica="@visualizzaComandoRicarica"
			  VisualizzaComandoTornaHomePage="@visualizzaComandoTornaHomePage"
			  VisualizzaComandoChiudi="@visualizzaComandoChiudi" />

<FluentLabel Style="margin-top:5px; margin-bottom: 5px;">E' possibile che nel campionamento creato siano presenti analiti non più utilizzati nella configurazione attuale.</FluentLabel>

<div style="padding: 5px; background-color:#fcfcfc; border: 1px solid #ccc; margin-bottom: 10px; min-width: 600px;">
	<FluentStack VerticalAlignment="VerticalAlignment.Center">
		<FluentButton Style="font-weight:bold;"
					  IconEnd="@(new Icons.Regular.Size16.Edit())"
					  Appearance="Appearance.Outline"
					  OnClick="@InserimentoDataPrelievoDialog">
			Data prelievo:
		</FluentButton>
		@nuovaDataPrelievo
	</FluentStack>
</div>

<div style="padding: 5px; background-color:#fcfcfc; border: 1px solid #ccc; margin-bottom: 10px; min-width: 600px;">
	<FluentStack VerticalAlignment="VerticalAlignment.Center">
		<FluentSelect TOption="string"
					  Items="@tipiCampionamento"
					  Id="tipocampionamento-listbox"
					  OptionText="@(i => i)"
					  OptionValue="@(i => i)"
					  @bind-Value="@tipoCampionamentoSelezionato"
					  Height="200px"
					  LabelTemplate="EtichettaTipoCampionamentoFragment" />
	</FluentStack>
</div>

<div style="padding: 5px; background-color:#fcfcfc; border: 1px solid #ccc; margin-bottom: 10px; min-width: 600px;">
	<FluentStack VerticalAlignment="VerticalAlignment.Center">
		<FluentCheckbox @bind-Value="@creaCollegamento" Label="Collega campionamento all'originale" />
	</FluentStack>
</div>

@code {
	RenderFragment EtichettaTipoCampionamentoFragment => @<FluentLabel Weight="FontWeight.Bold">Tipo campionamento:</FluentLabel> ;
}

<div class="floating-button-container">
	<FluentStack VerticalAlignment="VerticalAlignment.Center">
		<FluentButton Appearance="Appearance.Accent" OnClick="@Duplica" Loading="@creazioneInCorso">
			Duplica
		</FluentButton>
		<FluentButton Appearance="Appearance.Accent" OnClick="@Annulla">
			Annulla
		</FluentButton>
	</FluentStack>
</div>